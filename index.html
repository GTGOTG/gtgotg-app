<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GTGOTG - "Got To Go On The Go" | Every Restroom, Everywhere</title>
    <meta name="description" content="Find clean, safe restrooms nationwide. Every restroom, everywhere. When you got to go on the go - comprehensive restroom reviews and ratings across all business types in the USA.">
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        /* Header Styles */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 15px 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo {
            width: 80px;
            height: 80px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .brand-text {
            color: white;
        }

        .brand-title {
            font-size: 2.2rem;
            font-weight: bold;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .brand-tagline {
            font-size: 1rem;
            margin: 2px 0;
            opacity: 0.95;
        }

        .brand-secondary {
            font-size: 0.9rem;
            font-style: italic;
            opacity: 0.85;
        }

        .header-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .help-btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px 12px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .help-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }

        .auth-buttons {
            display: flex;
            gap: 10px;
        }

        .auth-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .login-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
        }

        .login-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .signup-btn {
            background: #4CAF50;
            color: white;
            border: 2px solid #4CAF50;
        }

        .signup-btn:hover {
            background: #45a049;
            transform: translateY(-2px);
        }

        /* Main Content */
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .search-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .search-title {
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5rem;
            color: #333;
            font-weight: 300;
        }

        .search-subtitle {
            text-align: center;
            margin-bottom: 25px;
            color: #666;
            font-size: 1.1rem;
        }

        .search-container {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            padding: 15px 20px;
            border: 3px solid #e0e0e0;
            border-radius: 15px;
            font-size: 1.1rem;
            min-width: 300px;
            transition: border-color 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .results-limit {
            background: white;
            border: 3px solid #e0e0e0;
            border-radius: 15px;
            padding: 15px 20px;
            font-size: 1rem;
            cursor: pointer;
            transition: border-color 0.3s ease;
            min-width: 120px;
        }

        .results-limit:focus {
            outline: none;
            border-color: #667eea;
        }

        .search-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .search-btn:hover {
            background: #45a049;
            transform: translateY(-2px);
        }

        .location-btn {
            background: #2196F3;
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .location-btn:hover {
            background: #1976D2;
            transform: translateY(-2px);
        }

        /* Category Filters */
        .category-section {
            margin-bottom: 25px;
        }

        .category-title {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.3rem;
            color: #333;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        .category-btn {
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .category-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .category-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .category-count {
            background: #ff4757;
            color: white;
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 0.8rem;
            position: absolute;
            top: -5px;
            right: -5px;
            min-width: 20px;
            text-align: center;
        }

        /* View Toggle */
        .view-toggle {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .view-btn {
            padding: 10px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .view-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        /* Results Section */
        .results-section {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            min-height: 500px;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .results-count {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
        }

        /* Map Styles */
        .map-container {
            height: 400px;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        #map {
            height: 100%;
            width: 100%;
        }

        /* Business Cards */
        .business-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }

        .business-card {
            background: white;
            border: 2px solid #f0f0f0;
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .business-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border-color: #667eea;
        }

        .business-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .business-name {
            font-size: 1.3rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .business-address {
            color: #666;
            font-size: 0.9rem;
        }

        .business-rating {
            text-align: right;
        }

        .stars {
            color: #ffd700;
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        .rating-text {
            font-size: 0.9rem;
            color: #666;
        }

        .business-details {
            margin-bottom: 15px;
        }

        .business-tags {
            display: flex;
            gap: 8px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }

        .tag {
            background: #f0f0f0;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            color: #666;
        }

        .tag.category {
            background: #e3f2fd;
            color: #1976d2;
        }

        .tag.brand {
            background: #f3e5f5;
            color: #7b1fa2;
        }

        .business-hours {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 10px;
        }

        .amenities {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .amenity {
            background: #e8f5e8;
            color: #2e7d32;
            padding: 4px 8px;
            border-radius: 8px;
            font-size: 0.8rem;
        }

        /* Restroom Rating Section */
        .restroom-rating {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .restroom-types {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            justify-content: center;
        }

        .restroom-type {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 10px;
            border-radius: 10px;
            transition: all 0.3s ease;
            background: white;
            border: 2px solid #e0e0e0;
        }

        .restroom-type:hover {
            background: #f0f0f0;
            transform: scale(1.05);
        }

        .restroom-type.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
        }

        .restroom-icon {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .restroom-label {
            font-size: 0.8rem;
            font-weight: 600;
        }

        .star-rating {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-bottom: 15px;
        }

        .star {
            font-size: 2rem;
            color: #ddd;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .star:hover,
        .star.active {
            color: #ffd700;
            transform: scale(1.1);
        }

        .rating-criteria {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .criteria-item {
            background: white;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid #e0e0e0;
        }

        .criteria-label {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .criteria-stars {
            display: flex;
            justify-content: center;
            gap: 2px;
        }

        .criteria-star {
            font-size: 1rem;
            color: #ddd;
            cursor: pointer;
        }

        .criteria-star.active {
            color: #ffd700;
        }

        /* Business Actions */
        .business-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .action-btn {
            flex: 1;
            padding: 12px 16px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .rate-btn {
            background: #4CAF50;
            color: white;
        }

        .rate-btn:hover {
            background: #45a049;
            transform: translateY(-2px);
        }

        .directions-btn {
            background: #2196F3;
            color: white;
        }

        .directions-btn:hover {
            background: #1976D2;
            transform: translateY(-2px);
        }

        .claim-btn {
            background: #FF9800;
            color: white;
        }

        .claim-btn:hover {
            background: #F57C00;
            transform: translateY(-2px);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #333;
        }

        .close {
            color: #aaa;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: #333;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            min-height: 100px;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        .form-textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-submit {
            background: #667eea;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
            width: 100%;
        }

        .form-submit:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        /* Admin Panel Styles */
        .admin-panel {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .admin-title {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* Load More Button */
        .load-more-container {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
        }

        .load-more-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .load-more-btn:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .load-more-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Results Info */
        .results-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .results-showing {
            font-size: 0.9rem;
            color: #666;
        }

        /* Footer */
        .footer {
            background: #2c3e50;
            color: white;
            padding: 30px 20px;
            text-align: center;
            margin-top: 40px;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .footer-tagline {
            font-size: 1.1rem;
            margin-bottom: 20px;
            opacity: 0.9;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .footer-link {
            color: white;
            text-decoration: none;
            transition: color 0.3s ease;
            position: relative;
        }

        .footer-link:hover {
            color: #667eea;
        }

        .footer-link::after {
            content: attr(data-count);
            background: #667eea;
            color: white;
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 0.7rem;
            position: absolute;
            top: -8px;
            right: -15px;
            min-width: 16px;
            text-align: center;
        }

        .footer-copyright {
            font-size: 0.9rem;
            opacity: 0.7;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }

            .brand-title {
                font-size: 1.8rem;
            }

            .search-container {
                flex-direction: column;
            }

            .search-input {
                min-width: auto;
                margin-bottom: 10px;
            }

            .results-limit {
                margin-bottom: 10px;
                min-width: auto;
            }

            .search-btn,
            .location-btn {
                width: 100%;
                margin-bottom: 10px;
            }

            .category-grid {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            }

            .business-grid {
                grid-template-columns: 1fr;
            }

            .restroom-types {
                flex-wrap: wrap;
                gap: 10px;
            }

            .business-actions {
                flex-direction: column;
            }

            .action-btn {
                min-width: auto;
            }

            .results-info {
                flex-direction: column;
                align-items: flex-start;
            }
        }

        /* Verification Modal Styles */
        .verification-modal {
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .verification-steps {
            margin-top: 20px;
        }

        .verification-step {
            animation: fadeIn 0.3s ease;
        }

        .verification-methods {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        .verification-method {
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .verification-method:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .verification-method.selected {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .method-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .method-status {
            background: #4CAF50;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
            margin-top: 10px;
            display: inline-block;
        }

        .code-input {
            font-size: 1.5rem;
            text-align: center;
            letter-spacing: 0.2em;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            width: 150px;
            margin: 10px 0;
        }

        .document-list {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .file-upload {
            border: 2px dashed #ccc;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            margin: 20px 0;
            transition: border-color 0.3s ease;
        }

        .file-upload:hover {
            border-color: #667eea;
        }

        .upload-label {
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .upload-icon {
            font-size: 2rem;
        }

        .success-message {
            text-align: center;
            padding: 20px;
        }

        .success-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .owner-badge {
            margin: 20px 0;
        }

        .verified-owner {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .owner-benefits {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: left;
        }

        .owner-benefits ul {
            list-style: none;
            padding: 0;
        }

        .owner-benefits li {
            padding: 5px 0;
        }

        .verify-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 15px;
        }

        .verify-btn:hover {
            background: #5a6fd8;
        }

        .verify-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .resend-link {
            margin-top: 15px;
            font-size: 0.9rem;
        }

        .resend-link a {
            color: #667eea;
            text-decoration: none;
        }

        .verification-note {
            font-size: 0.9rem;
            color: #666;
            margin-top: 15px;
        }

        /* Response Modal Styles */
        .response-modal {
            max-width: 600px;
        }

        .review-context {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .reviewer-name {
            font-weight: 600;
        }

        .review-date {
            color: #666;
            font-size: 0.9rem;
        }

        .review-rating {
            font-size: 1.1rem;
        }

        .review-text {
            line-height: 1.6;
            color: #333;
        }

        .owner-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .owner-name {
            font-weight: 600;
        }

        .character-count {
            text-align: right;
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }

        .response-options {
            margin: 20px 0;
        }

        .response-options label {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            cursor: pointer;
            border-radius: 10px;
            transition: background 0.3s ease;
        }

        .response-options label:hover {
            background: #f8f9fa;
        }

        .response-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
        }

        .cancel-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .cancel-btn:hover {
            background: #5a6268;
        }

        .submit-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .submit-btn:hover {
            background: #45a049;
        }

        /* Owner Response Display */
        .owner-response {
            background: #e8f5e8;
            border-left: 4px solid #4CAF50;
            padding: 15px;
            margin-top: 15px;
            border-radius: 0 10px 10px 0;
        }

        .owner-response-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .owner-response-text {
            line-height: 1.6;
            color: #333;
        }

        .response-date {
            color: #666;
            font-size: 0.8rem;
            margin-top: 10px;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .verification-modal,
            .response-modal {
                margin: 10px;
                max-width: calc(100vw - 20px);
            }

            .verification-methods {
                grid-template-columns: 1fr;
            }

            .response-actions {
                flex-direction: column;
            }

            .cancel-btn,
            .submit-btn {
                width: 100%;
            }
        }

        /* Help Tooltip */
        .help-tooltip {
            position: absolute;
            background: #333;
            color: white;
            padding: 10px 15px;
            border-radius: 10px;
            font-size: 0.9rem;
            max-width: 300px;
            z-index: 1001;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            display: none;
        }

        .help-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 20px;
            border: 8px solid transparent;
            border-top-color: #333;
        }

        /* Loading Animation */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 40px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Success/Error Messages */
        .message {
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .message.success {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }

        .message.error {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }

        .message.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 2px solid #bee5eb;
        }

        /* Photo Upload */
        .photo-upload {
            border: 2px dashed #ddd;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .photo-upload:hover {
            border-color: #667eea;
            background: #f8f9fa;
        }

        .photo-preview {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .photo-item {
            position: relative;
            width: 100px;
            height: 100px;
            border-radius: 8px;
            overflow: hidden;
        }

        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .photo-remove {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #ff4757;
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-size: 0.8rem;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo-section">
                <img src="/home/ubuntu/upload/gtgotg_logo_primary-BE-ZRW_Y.png" alt="GTGOTG Logo" class="logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <div style="display: none; font-size: 4rem;">🚽</div>
                <div class="brand-text">
                    <h1 class="brand-title">GTGOTG</h1>
                    <div class="brand-tagline">"Every Restroom, Everywhere"</div>
                    <div class="brand-secondary">"When you got to go on the go"</div>
                </div>
            </div>
            <div class="header-actions">
                <button class="help-btn" onclick="toggleHelp()" title="Help & Tips">💡</button>
                <div class="auth-buttons">
                    <button class="auth-btn login-btn" onclick="showLogin()">Login</button>
                    <button class="auth-btn signup-btn" onclick="showSignup()">Sign Up</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Search Section -->
        <div class="search-section">
            <h2 class="search-title">Find Clean, Safe Restrooms</h2>
            <p class="search-subtitle">Search ANY business nationwide by name, city, state, or ZIP code</p>
            
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Search McDonald's, Starbucks, 90210, Denver CO, or any business/location..." id="searchInput">
                <select class="results-limit" id="resultsLimit">
                    <option value="25" selected>25 results</option>
                    <option value="50">50 results</option>
                    <option value="75">75 results</option>
                    <option value="100">100 results</option>
                </select>
                <button class="search-btn" onclick="performSearch()">🔍 Search</button>
                <button class="location-btn" onclick="enableLocation()">📍 Enable Location</button>
            </div>

            <!-- Category Filters -->
            <div class="category-section">
                <h3 class="category-title">Find Restrooms at ALL Types of Businesses</h3>
                <div class="category-grid">
                    <button class="category-btn active" data-category="" onclick="selectCategory(this, '')">
                        All Businesses <span class="category-count">6</span>
                    </button>
                    <button class="category-btn" data-category="restaurant" onclick="selectCategory(this, 'restaurant')">
                        Restaurants <span class="category-count">7</span>
                    </button>
                    <button class="category-btn" data-category="fast_food" onclick="selectCategory(this, 'fast_food')">
                        Fast Food <span class="category-count">8</span>
                    </button>
                    <button class="category-btn" data-category="cafe" onclick="selectCategory(this, 'cafe')">
                        Coffee Shops <span class="category-count">9</span>
                    </button>
                    <button class="category-btn" data-category="fuel" onclick="selectCategory(this, 'fuel')">
                        Gas Stations <span class="category-count">10</span>
                    </button>
                    <button class="category-btn" data-category="convenience" onclick="selectCategory(this, 'convenience')">
                        Convenience <span class="category-count">11</span>
                    </button>
                    <button class="category-btn" data-category="supermarket" onclick="selectCategory(this, 'supermarket')">
                        Supermarkets <span class="category-count">12</span>
                    </button>
                    <button class="category-btn" data-category="shopping" onclick="selectCategory(this, 'shopping')">
                        Shopping <span class="category-count">13</span>
                    </button>
                    <button class="category-btn" data-category="hotel" onclick="selectCategory(this, 'hotel')">
                        Hotels <span class="category-count">14</span>
                    </button>
                    <button class="category-btn" data-category="entertainment" onclick="selectCategory(this, 'entertainment')">
                        Entertainment <span class="category-count">15</span>
                    </button>
                    <button class="category-btn" data-category="healthcare" onclick="selectCategory(this, 'healthcare')">
                        Healthcare <span class="category-count">16</span>
                    </button>
                    <button class="category-btn" data-category="services" onclick="selectCategory(this, 'services')">
                        Services <span class="category-count">17</span>
                    </button>
                    <button class="category-btn" data-category="truck_stops" onclick="selectCategory(this, 'truck_stops')">
                        Truck Stops <span class="category-count">18</span>
                    </button>
                    <button class="category-btn" data-category="rest_areas" onclick="selectCategory(this, 'rest_areas')">
                        Rest Areas <span class="category-count">19</span>
                    </button>
                    <button class="category-btn" data-category="recreation" onclick="selectCategory(this, 'recreation')">
                        Recreation <span class="category-count">20</span>
                    </button>
                </div>
            </div>

            <!-- View Toggle -->
            <div class="view-toggle">
                <button class="view-btn active" onclick="setView('both')">Map + List</button>
                <button class="view-btn" onclick="setView('map')">Map Only</button>
                <button class="view-btn" onclick="setView('list')">List Only</button>
            </div>
        </div>

        <!-- Results Section -->
        <div class="results-section">
            <div class="results-info">
                <div class="results-count" id="resultsCount">Ready to search nationwide</div>
                <div class="results-showing" id="resultsShowing"></div>
            </div>

            <!-- Map Container -->
            <div class="map-container" id="mapContainer">
                <div id="map"></div>
            </div>

            <!-- Business Grid -->
            <div class="business-grid" id="businessGrid">
                <div style="text-align: center; padding: 40px; color: #666;">
                    <div style="font-size: 3rem; margin-bottom: 15px;">🔍</div>
                    <h3>Enter any business name, city, state, or ZIP code to find restrooms nationwide</h3>
                    <p>Search for McDonald's, Starbucks, gas stations, or any business with restrooms across the USA</p>
                </div>
            </div>

            <!-- Load More Button -->
            <div class="load-more-container" id="loadMoreContainer" style="display: none;">
                <button class="load-more-btn" id="loadMoreBtn" onclick="loadMoreResults()">
                    Load 25 More Results
                </button>
                <div style="margin-top: 10px; font-size: 0.9rem; color: #666;" id="loadMoreInfo"></div>
            </div>
        </div>
    </div>

    <!-- Business Verification Modal -->
    <div class="modal" id="verificationModal">
        <div class="modal-content verification-modal">
            <span class="close" onclick="closeVerificationModal()">&times;</span>
            <h2>🏢 Claim Your Business Listing</h2>
            <p>Verify your ownership to respond to reviews and manage your listing</p>
            
            <div class="verification-steps">
                <!-- Step 1: Business Information -->
                <div class="verification-step" id="step1">
                    <h3>Step 1: Business Information</h3>
                    <div class="form-group">
                        <label>Business Name</label>
                        <input type="text" id="verifyBusinessName" placeholder="Enter your business name" readonly>
                    </div>
                    <div class="form-group">
                        <label>Your Name</label>
                        <input type="text" id="verifyOwnerName" placeholder="Your full name" required>
                    </div>
                    <div class="form-group">
                        <label>Your Title/Position</label>
                        <input type="text" id="verifyOwnerTitle" placeholder="Owner, Manager, etc." required>
                    </div>
                    <div class="form-group">
                        <label>Business Phone</label>
                        <input type="tel" id="verifyBusinessPhone" placeholder="(555) 123-4567" required>
                    </div>
                    <div class="form-group">
                        <label>Business Email</label>
                        <input type="email" id="verifyBusinessEmail" placeholder="contact@yourbusiness.com" required>
                    </div>
                    <button class="verify-btn" onclick="proceedToVerification()">Continue to Verification</button>
                </div>

                <!-- Step 2: Verification Method -->
                <div class="verification-step" id="step2" style="display: none;">
                    <h3>Step 2: Choose Verification Method</h3>
                    <div class="verification-methods">
                        <div class="verification-method" onclick="selectVerificationMethod('phone')">
                            <div class="method-icon">📱</div>
                            <h4>Phone Verification</h4>
                            <p>Receive a verification code via SMS</p>
                            <div class="method-status" id="phoneStatus">Recommended</div>
                        </div>
                        <div class="verification-method" onclick="selectVerificationMethod('email')">
                            <div class="method-icon">📧</div>
                            <h4>Email Verification</h4>
                            <p>Receive a verification code via email</p>
                            <div class="method-status" id="emailStatus">Fast & Easy</div>
                        </div>
                        <div class="verification-method" onclick="selectVerificationMethod('document')">
                            <div class="method-icon">📄</div>
                            <h4>Document Verification</h4>
                            <p>Upload business license or tax document</p>
                            <div class="method-status" id="documentStatus">Most Secure</div>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Phone Verification -->
                <div class="verification-step" id="step3-phone" style="display: none;">
                    <h3>Step 3: Phone Verification</h3>
                    <p>We'll send a 6-digit code to <strong id="phoneDisplay"></strong></p>
                    <button class="verify-btn" onclick="sendPhoneCode()">Send Verification Code</button>
                    <div class="code-input-section" id="phoneCodeSection" style="display: none;">
                        <label>Enter 6-digit code:</label>
                        <input type="text" id="phoneCode" placeholder="123456" maxlength="6" class="code-input">
                        <button class="verify-btn" onclick="verifyPhoneCode()">Verify Code</button>
                        <p class="resend-link">Didn't receive code? <a href="#" onclick="sendPhoneCode()">Resend</a></p>
                    </div>
                </div>

                <!-- Step 3: Email Verification -->
                <div class="verification-step" id="step3-email" style="display: none;">
                    <h3>Step 3: Email Verification</h3>
                    <p>We'll send a verification code to <strong id="emailDisplay"></strong></p>
                    <button class="verify-btn" onclick="sendEmailCode()">Send Verification Code</button>
                    <div class="code-input-section" id="emailCodeSection" style="display: none;">
                        <label>Enter 6-digit code:</label>
                        <input type="text" id="emailCode" placeholder="123456" maxlength="6" class="code-input">
                        <button class="verify-btn" onclick="verifyEmailCode()">Verify Code</button>
                        <p class="resend-link">Didn't receive code? <a href="#" onclick="sendEmailCode()">Resend</a></p>
                    </div>
                </div>

                <!-- Step 3: Document Verification -->
                <div class="verification-step" id="step3-document" style="display: none;">
                    <h3>Step 3: Document Verification</h3>
                    <p>Upload one of the following documents:</p>
                    <ul class="document-list">
                        <li>Business License</li>
                        <li>Tax ID Document</li>
                        <li>Articles of Incorporation</li>
                        <li>DBA Certificate</li>
                    </ul>
                    <div class="file-upload">
                        <input type="file" id="documentUpload" accept=".pdf,.jpg,.jpeg,.png" onchange="handleDocumentUpload()">
                        <label for="documentUpload" class="upload-label">
                            <div class="upload-icon">📎</div>
                            <span>Choose File or Drag & Drop</span>
                        </label>
                        <div class="upload-status" id="uploadStatus"></div>
                    </div>
                    <button class="verify-btn" id="submitDocumentBtn" onclick="submitDocument()" disabled>Submit for Review</button>
                    <p class="verification-note">Documents are reviewed within 24-48 hours</p>
                </div>

                <!-- Step 4: Success -->
                <div class="verification-step" id="step4" style="display: none;">
                    <div class="success-message">
                        <div class="success-icon">✅</div>
                        <h3>Verification Successful!</h3>
                        <p>Congratulations! You are now a verified business owner.</p>
                        <div class="owner-badge">
                            <span class="badge verified-owner">✅ VERIFIED OWNER</span>
                        </div>
                        <div class="owner-benefits">
                            <h4>Your Benefits:</h4>
                            <ul>
                                <li>✅ Respond to customer reviews</li>
                                <li>✅ Update business information</li>
                                <li>✅ Access analytics dashboard</li>
                                <li>✅ Verified owner badge on all responses</li>
                            </ul>
                        </div>
                        <button class="verify-btn" onclick="closeVerificationModal()">Start Managing Your Listing</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Owner Response Modal -->
    <div class="modal" id="ownerResponseModal">
        <div class="modal-content response-modal">
            <span class="close" onclick="closeOwnerResponseModal()">&times;</span>
            <h2>📝 Respond to Review</h2>
            
            <div class="review-context">
                <div class="review-header">
                    <span class="reviewer-name" id="reviewerName">Anonymous User</span>
                    <span class="review-date" id="reviewDate">2 days ago</span>
                    <div class="review-rating" id="reviewRating">⭐⭐⭐⭐⭐</div>
                </div>
                <div class="review-text" id="reviewText">
                    Great restroom! Very clean and well-maintained.
                </div>
            </div>

            <div class="response-form">
                <div class="owner-info">
                    <span class="badge verified-owner">✅ VERIFIED OWNER</span>
                    <span class="owner-name" id="responseOwnerName">Business Owner</span>
                </div>
                
                <div class="form-group">
                    <label>Your Response</label>
                    <textarea id="ownerResponseText" placeholder="Thank you for your feedback! We appreciate..." maxlength="500" rows="4"></textarea>
                    <div class="character-count">
                        <span id="responseCharCount">0</span>/500 characters
                    </div>
                </div>

                <div class="response-options">
                    <div class="form-group">
                        <label>
                            <input type="radio" name="responseType" value="public" checked>
                            Public Response (visible to all users)
                        </label>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="radio" name="responseType" value="private">
                            Private Response (only visible to reviewer)
                        </label>
                    </div>
                </div>

                <div class="response-actions">
                    <button class="cancel-btn" onclick="closeOwnerResponseModal()">Cancel</button>
                    <button class="submit-btn" onclick="submitOwnerResponse()">Post Response</button>
                </div>
            </div>
        </div>
    </div>
    <div class="admin-panel" id="adminPanel" style="display: none;">
        <div class="admin-header">
            <div class="admin-title">🛡️ Admin Dashboard - Jessica Esposito</div>
            <button onclick="hideAdmin()" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 8px 12px; border-radius: 5px; cursor: pointer;">Hide</button>
        </div>
        <div class="admin-stats">
            <div class="stat-card">
                <div class="stat-number">1,247</div>
                <div class="stat-label">Total Reviews</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">856</div>
                <div class="stat-label">Registered Users</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">423</div>
                <div class="stat-label">Business Listings</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">89%</div>
                <div class="stat-label">Positive Ratings</div>
            </div>
        </div>
        <div style="display: flex; gap: 15px; flex-wrap: wrap;">
            <button onclick="manageBusinesses()" style="background: #4CAF50; color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-weight: 600;">Manage Businesses</button>
            <button onclick="moderateReviews()" style="background: #FF9800; color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-weight: 600;">Moderate Reviews</button>
            <button onclick="viewAnalytics()" style="background: #2196F3; color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-weight: 600;">View Analytics</button>
            <button onclick="exportData()" style="background: #9C27B0; color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-weight: 600;">Export Data</button>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Login to GTGOTG</h2>
                <span class="close" onclick="closeModal('loginModal')">&times;</span>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label class="form-label">Email Address</label>
                    <input type="email" class="form-input" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-input" id="loginPassword" required>
                </div>
                <button type="submit" class="form-submit">Login</button>
            </form>
            <div style="text-align: center; margin-top: 15px;">
                <a href="#" onclick="showSignup(); closeModal('loginModal');" style="color: #667eea;">Don't have an account? Sign up</a>
            </div>
        </div>
    </div>

    <!-- Signup Modal -->
    <div id="signupModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Join GTGOTG Community</h2>
                <span class="close" onclick="closeModal('signupModal')">&times;</span>
            </div>
            <form id="signupForm">
                <div class="form-group">
                    <label class="form-label">Full Name</label>
                    <input type="text" class="form-input" id="signupName" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Email Address</label>
                    <input type="email" class="form-input" id="signupEmail" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-input" id="signupPassword" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Confirm Password</label>
                    <input type="password" class="form-input" id="signupConfirmPassword" required>
                </div>
                <button type="submit" class="form-submit">Create Account</button>
            </form>
            <div style="text-align: center; margin-top: 15px;">
                <a href="#" onclick="showLogin(); closeModal('signupModal');" style="color: #667eea;">Already have an account? Login</a>
            </div>
        </div>
    </div>

    <!-- Rating Modal -->
    <div id="ratingModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Rate This Restroom</h2>
                <span class="close" onclick="closeModal('ratingModal')">&times;</span>
            </div>
            
            <div class="restroom-rating">
                <h3 style="text-align: center; margin-bottom: 15px;">Which restroom did you use?</h3>
                <div class="restroom-types">
                    <div class="restroom-type" onclick="selectRestroomType(this, 'men')">
                        <div class="restroom-icon">🚹</div>
                        <div class="restroom-label">Men</div>
                    </div>
                    <div class="restroom-type" onclick="selectRestroomType(this, 'women')">
                        <div class="restroom-icon">🚺</div>
                        <div class="restroom-label">Women</div>
                    </div>
                    <div class="restroom-type" onclick="selectRestroomType(this, 'family')">
                        <div class="restroom-icon">🚻</div>
                        <div class="restroom-label">Unisex/Family</div>
                    </div>
                    <div class="restroom-type" onclick="selectRestroomType(this, 'accessible')">
                        <div class="restroom-icon">♿</div>
                        <div class="restroom-label">ADA Accessible</div>
                    </div>
                </div>

                <h3 style="text-align: center; margin-bottom: 15px;">Overall Rating (1-10 Stars)</h3>
                <div class="star-rating">
                    <span class="star" onclick="setRating(1)">⭐</span>
                    <span class="star" onclick="setRating(2)">⭐</span>
                    <span class="star" onclick="setRating(3)">⭐</span>
                    <span class="star" onclick="setRating(4)">⭐</span>
                    <span class="star" onclick="setRating(5)">⭐</span>
                    <span class="star" onclick="setRating(6)">⭐</span>
                    <span class="star" onclick="setRating(7)">⭐</span>
                    <span class="star" onclick="setRating(8)">⭐</span>
                    <span class="star" onclick="setRating(9)">⭐</span>
                    <span class="star" onclick="setRating(10)">⭐</span>
                </div>

                <h3 style="text-align: center; margin-bottom: 15px;">Rate Specific Criteria</h3>
                <div class="rating-criteria">
                    <div class="criteria-item">
                        <div class="criteria-label">🧼 Cleanliness</div>
                        <div class="criteria-stars" data-criteria="cleanliness">
                            <span class="criteria-star" onclick="setCriteriaRating('cleanliness', 1)">⭐</span>
                            <span class="criteria-star" onclick="setCriteriaRating('cleanliness', 2)">⭐</span>
                            <span class="criteria-star" onclick="setCriteriaRating('cleanliness', 3)">⭐</span>
                            <span class="criteria-star" onclick="setCriteriaRating('cleanliness', 4)">⭐</span>
                            <span class="criteria-star" onclick="setCriteriaRating('cleanliness', 5)">⭐</span>
                        </div>
                    </div>
                    <div class="criteria-item">
                        <div class="criteria-label">♿ ADA Compliance</div>
                        <div class="criteria-stars" data-criteria="ada">
                            <span class="criteria-star" onclick="setCriteriaRating('ada', 1)">⭐</span>
                            <span class="criteria-star" onclick="setCriteriaRating('ada', 2)">⭐</span>
                            <span class="criteria-star" onclick="setCriteriaRating('ada', 3)">⭐</span>
                            <span class="criteria-star" onclick="setCriteriaRating('ada', 4)">⭐</span>
                            <span class="criteria-star" onclick="setCriteriaRating('ada', 5)">⭐</span>
                        </div>
                    </div>
                    <div class="criteria-item">
                        <div class="criteria-label">🛡️ Safety</div>
                        <div class="criteria-stars" data-criteria="safety">
                            <span class="criteria-star" onclick="setCriteriaRating('safety', 1)">⭐</span>
                            <span class="criteria-star" onclick="setCriteriaRating('safety', 2)">⭐</span>
                            <span class="criteria-star" onclick="setCriteriaRating('safety', 3)">⭐</span>
                            <span class="criteria-star" onclick="setCriteriaRating('safety', 4)">⭐</span>
                            <span class="criteria-star" onclick="setCriteriaRating('safety', 5)">⭐</span>
                        </div>
                    </div>
                    <div class="criteria-item">
                        <div class="criteria-label">🧻 Supplies</div>
                        <div class="criteria-stars" data-criteria="supplies">
                            <span class="criteria-star" onclick="setCriteriaRating('supplies', 1)">⭐</span>
                            <span class="criteria-star" onclick="setCriteriaRating('supplies', 2)">⭐</span>
                            <span class="criteria-star" onclick="setCriteriaRating('supplies', 3)">⭐</span>
                            <span class="criteria-star" onclick="setCriteriaRating('supplies', 4)">⭐</span>
                            <span class="criteria-star" onclick="setCriteriaRating('supplies', 5)">⭐</span>
                        </div>
                    </div>
                </div>
            </div>

            <form id="reviewForm">
                <div class="form-group">
                    <label class="form-label">Write a Review (Login Required)</label>
                    <textarea class="form-textarea" id="reviewText" placeholder="Share your experience to help other travelers..." disabled></textarea>
                    <small style="color: #666;">Please login to write reviews and upload photos</small>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Upload Photos (Up to 5, Login Required)</label>
                    <div class="photo-upload" onclick="document.getElementById('photoInput').click()" style="opacity: 0.5; cursor: not-allowed;">
                        <div>📷 Click to upload restroom photos</div>
                        <small>Login required for photo uploads</small>
                    </div>
                    <input type="file" id="photoInput" multiple accept="image/*" style="display: none;" disabled>
                    <div class="photo-preview" id="photoPreview"></div>
                </div>

                <button type="submit" class="form-submit">Submit Rating</button>
            </form>
        </div>
    </div>

    <!-- Help Tooltip -->
    <div class="help-tooltip" id="helpTooltip"></div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-tagline">Real people reviewing restrooms at ALL types of businesses to help you find clean, safe facilities wherever you are in the USA</div>
            <div class="footer-links">
                <a href="#" class="footer-link" data-count="36">About</a>
                <a href="#" class="footer-link" data-count="43">Privacy Policy</a>
                <a href="#" class="footer-link" data-count="56">Terms of Service</a>
                <a href="#" class="footer-link" data-count="38">Contact</a>
                <a href="#" class="footer-link" data-count="81">Help</a>
            </div>
            <div class="footer-copyright">© 2025 Jessica Esposito / Colorado Quality LLC. All rights reserved.</div>
        </div>
    </footer>

    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script>
        console.log('🚽 GTGOTG - "Got To Go On The Go" - Complete Premium Application Initializing...');

        // Global Variables
        let map;
        let currentUser = null;
        let currentRating = 0;
        let selectedRestroomType = null;
        let criteriaRatings = {};
        let helpVisible = false;
        let currentCategory = '';
        let currentView = 'both';
        let searchResults = [];
        let allSearchResults = []; // Store all results for pagination
        let currentResultsLimit = 25;
        let currentOffset = 0;
        let totalAvailableResults = 0;

        // Sample comprehensive business data
        const sampleBusinesses = [
            {
                name: "McDonald's",
                address: "1000 Main Street, USA",
                category: "Fast Food",
                brand: "McDonald's",
                rating: 7.2,
                reviews: 15,
                hours: "Mon-Sun 6:00-23:00",
                amenities: ["Dining Area", "Drive-Thru", "WiFi", "Playground"],
                lat: 39.7392,
                lng: -104.9903,
                hasRestrooms: true,
                restroomRatings: {
                    cleanliness: 4.2,
                    ada: 4.8,
                    safety: 4.5,
                    supplies: 4.0
                }
            },
            {
                name: "Starbucks Coffee",
                address: "2000 Coffee Lane, USA",
                category: "Coffee Shop",
                brand: "Starbucks",
                rating: 8.1,
                reviews: 23,
                hours: "Mon-Sun 5:30-22:00",
                amenities: ["WiFi", "Outdoor Seating", "Mobile Order", "Drive-Thru"],
                lat: 39.7292,
                lng: -104.9803,
                hasRestrooms: true,
                restroomRatings: {
                    cleanliness: 4.6,
                    ada: 4.2,
                    safety: 4.7,
                    supplies: 4.4
                }
            },
            {
                name: "Shell Gas Station",
                address: "3000 Highway Blvd, USA",
                category: "Gas Station",
                brand: "Shell",
                rating: 6.8,
                reviews: 12,
                hours: "24/7",
                amenities: ["24/7", "Car Wash", "Convenience Store", "ATM"],
                lat: 39.7192,
                lng: -104.9703,
                hasRestrooms: true,
                restroomRatings: {
                    cleanliness: 3.8,
                    ada: 3.5,
                    safety: 4.0,
                    supplies: 3.6
                }
            },
            {
                name: "Walmart Supercenter",
                address: "4000 Shopping Way, USA",
                category: "Supermarket",
                brand: "Walmart",
                rating: 7.5,
                reviews: 31,
                hours: "Mon-Sun 6:00-23:00",
                amenities: ["Pharmacy", "Grocery", "Electronics", "Auto Center"],
                lat: 39.7092,
                lng: -104.9603,
                hasRestrooms: true,
                restroomRatings: {
                    cleanliness: 4.1,
                    ada: 4.9,
                    safety: 4.3,
                    supplies: 4.2
                }
            },
            {
                name: "Pilot Travel Center",
                address: "5000 Interstate Dr, USA",
                category: "Truck Stop",
                brand: "Pilot",
                rating: 8.3,
                reviews: 18,
                hours: "24/7",
                amenities: ["Truck Parking", "Showers", "Laundry", "Restaurant"],
                lat: 39.6992,
                lng: -104.9503,
                hasRestrooms: true,
                restroomRatings: {
                    cleanliness: 4.5,
                    ada: 4.7,
                    safety: 4.6,
                    supplies: 4.8
                }
            },
            {
                name: "Target",
                address: "6000 Retail Plaza, USA",
                category: "Shopping",
                brand: "Target",
                rating: 8.0,
                reviews: 27,
                hours: "Mon-Sun 8:00-22:00",
                amenities: ["Pharmacy", "Starbucks", "Grocery", "Electronics"],
                lat: 39.6892,
                lng: -104.9403,
                hasRestrooms: true,
                restroomRatings: {
                    cleanliness: 4.7,
                    ada: 4.8,
                    safety: 4.6,
                    supplies: 4.5
                }
            }
        ];

        // ZIP code to state mapping (simplified)
        const zipToState = {
            '0': 'MA', '1': 'MA', '2': 'MA', '3': 'NH', '4': 'ME', '5': 'VT',
            '6': 'CT', '7': 'NJ', '8': 'NJ', '9': 'CA', '10': 'NY', '11': 'NY',
            '12': 'NY', '13': 'NY', '14': 'NY', '15': 'PA', '16': 'PA', '17': 'PA',
            '18': 'PA', '19': 'PA', '20': 'DC', '21': 'MD', '22': 'VA', '23': 'VA',
            '24': 'VA', '25': 'WV', '26': 'WV', '27': 'NC', '28': 'NC', '29': 'SC',
            '30': 'GA', '31': 'GA', '32': 'FL', '33': 'FL', '34': 'FL', '35': 'AL',
            '36': 'AL', '37': 'TN', '38': 'TN', '39': 'OH', '40': 'KY', '41': 'KY',
            '42': 'PA', '43': 'OH', '44': 'OH', '45': 'OH', '46': 'IN', '47': 'IN',
            '48': 'IL', '49': 'IL', '50': 'IA', '51': 'IA', '52': 'IA', '53': 'WI',
            '54': 'WI', '55': 'MN', '56': 'MN', '57': 'MN', '58': 'MT', '59': 'MT',
            '60': 'IL', '61': 'IL', '62': 'IL', '63': 'MO', '64': 'MO', '65': 'MO',
            '66': 'KS', '67': 'KS', '68': 'NE', '69': 'NE', '70': 'LA', '71': 'LA',
            '72': 'AR', '73': 'OK', '74': 'OK', '75': 'TX', '76': 'TX', '77': 'TX',
            '78': 'TX', '79': 'TX', '80': 'CO', '81': 'CO', '82': 'WY', '83': 'ID',
            '84': 'UT', '85': 'AZ', '86': 'AZ', '87': 'NM', '88': 'NV', '89': 'NV',
            '90': 'CA', '91': 'CA', '92': 'CA', '93': 'CA', '94': 'CA', '95': 'CA',
            '96': 'CA', '97': 'OR', '98': 'WA', '99': 'AK'
        };

        // State bounding boxes for comprehensive searches
        const stateBounds = {
            'CA': [32.5343, -124.4096, 42.0095, -114.1308],
            'NY': [40.4774, -79.7624, 45.0153, -71.7517],
            'TX': [25.8371, -106.6456, 36.5007, -93.5083],
            'FL': [24.3963, -87.6349, 31.0009, -79.9743],
            'CO': [36.9929, -109.0489, 41.0023, -102.0424]
            // Add more states as needed
        };

        // Initialize Application
        function initializeApp() {
            try {
                console.log('✅ Initializing map...');
                initializeMap();
                
                console.log('✅ Setting up event listeners...');
                setupEventListeners();
                
                console.log('✅ GTGOTG - Complete premium application initialized successfully!');
                
                // Check for admin access
                checkAdminAccess();
                
            } catch (error) {
                console.error('❌ Error initializing GTGOTG app:', error);
                showMessage('Error initializing application. Please refresh the page.', 'error');
            }
        }

        // Initialize Map
        function initializeMap() {
            map = L.map('map').setView([39.8283, -98.5795], 4); // Center of USA
            
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '© OpenStreetMap contributors'
            }).addTo(map);
            
            console.log('✅ Map initialized successfully');
        }

        // Setup Event Listeners
        function setupEventListeners() {
            // Search input
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });

            // Form submissions
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            document.getElementById('signupForm').addEventListener('submit', handleSignup);
            document.getElementById('reviewForm').addEventListener('submit', handleReviewSubmit);

            // Photo upload
            document.getElementById('photoInput').addEventListener('change', handlePhotoUpload);

            // Modal close on outside click
            window.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal')) {
                    e.target.style.display = 'none';
                }
            });
        }

        // Admin Access Check
        function checkAdminAccess() {
            // Check for admin credentials in URL or localStorage
            const urlParams = new URLSearchParams(window.location.search);
            const adminKey = urlParams.get('admin') || localStorage.getItem('adminKey');
            
            if (adminKey === 'jessica_admin_2025' || 
                (currentUser && currentUser.email === 'jessica@coloradoquality.com')) {
                showAdminPanel();
            }
        }

        // Search Functions with OpenStreetMap Integration
        function performSearch() {
            const query = document.getElementById('searchInput').value.trim();
            if (!query) {
                showMessage('Please enter a search term', 'info');
                return;
            }

            // Get selected results limit
            currentResultsLimit = parseInt(document.getElementById('resultsLimit').value);
            currentOffset = 0; // Reset pagination
            
            console.log('🔍 Performing OpenStreetMap search:', query, 'Limit:', currentResultsLimit);
            showLoading();

            // Parse query
            const parsedQuery = parseSearchQuery(query);
            console.log('🔍 Parsed query:', parsedQuery);

            // Use OpenStreetMap Overpass API for real business search
            searchWithOverpassAPI(parsedQuery);
        }

        async function searchWithOverpassAPI(parsedQuery) {
            try {
                let overpassQuery = '';
                let searchArea = '';

                // Determine search area based on query type
                if (parsedQuery.type === 'zip') {
                    const state = parsedQuery.state;
                    if (stateBounds[state]) {
                        const bounds = stateBounds[state];
                        searchArea = `(${bounds[0]},${bounds[1]},${bounds[2]},${bounds[3]})`;
                    } else {
                        // Default to USA bounds
                        searchArea = '(24.396308,-125.0,49.384358,-66.93457)';
                    }
                } else if (parsedQuery.type === 'state') {
                    const state = parsedQuery.state;
                    if (stateBounds[state]) {
                        const bounds = stateBounds[state];
                        searchArea = `(${bounds[0]},${bounds[1]},${bounds[2]},${bounds[3]})`;
                    } else {
                        searchArea = '(24.396308,-125.0,49.384358,-66.93457)';
                    }
                } else {
                    // Business name search - use USA bounds
                    searchArea = '(24.396308,-125.0,49.384358,-66.93457)';
                }

                // Build comprehensive Overpass query for businesses with restrooms
                // Increase limit to get more results for pagination
                const queryLimit = Math.min(currentResultsLimit * 4, 400); // Get more results than needed
                
                overpassQuery = `
                [out:json][timeout:25];
                (
                  // Restaurants and food services
                  nwr["amenity"~"^(restaurant|fast_food|cafe|bar|pub)$"]${searchArea};
                  
                  // Retail and shopping
                  nwr["shop"~"^(convenience|supermarket|mall|department_store)$"]${searchArea};
                  
                  // Gas stations and fuel
                  nwr["amenity"="fuel"]${searchArea};
                  
                  // Healthcare and services
                  nwr["amenity"~"^(hospital|clinic|pharmacy|bank)$"]${searchArea};
                  
                  // Transportation and lodging
                  nwr["highway"~"^(services|rest_area)$"]${searchArea};
                  nwr["tourism"="hotel"]${searchArea};
                  
                  // Recreation and entertainment
                  nwr["leisure"~"^(park|sports_centre|fitness_centre)$"]${searchArea};
                  nwr["amenity"~"^(cinema|theatre)$"]${searchArea};
                );
                out center meta ${queryLimit};
                `;

                console.log('📡 OpenStreetMap Overpass query:', overpassQuery);

                // Make request to Overpass API
                const response = await fetch('https://overpass-api.de/api/interpreter', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: 'data=' + encodeURIComponent(overpassQuery)
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                console.log('📡 OpenStreetMap response:', data);

                // Process and display results
                const processedResults = processOverpassResults(data, parsedQuery);
                allSearchResults = processedResults; // Store all results
                totalAvailableResults = processedResults.length;
                
                // Display first batch
                displayPaginatedResults();

            } catch (error) {
                console.error('❌ OpenStreetMap search error:', error);
                showMessage('Search temporarily unavailable. Showing sample results.', 'info');
                
                // Fallback to sample data
                const fallbackResults = searchBusinesses(parsedQuery);
                allSearchResults = fallbackResults;
                totalAvailableResults = fallbackResults.length;
                displayPaginatedResults();
            }
        }

        // Pagination Functions
        function displayPaginatedResults() {
            // Get current page of results
            const startIndex = currentOffset;
            const endIndex = Math.min(startIndex + currentResultsLimit, allSearchResults.length);
            const currentPageResults = allSearchResults.slice(startIndex, endIndex);
            
            // Display current page
            searchResults = currentPageResults;
            displayResults(currentPageResults);
            updateMap(currentPageResults);
            
            // Update pagination info
            updatePaginationInfo();
            
            // Show/hide load more button
            updateLoadMoreButton();
        }

        function updatePaginationInfo() {
            const resultsCount = document.getElementById('resultsCount');
            const resultsShowing = document.getElementById('resultsShowing');
            
            if (allSearchResults.length === 0) {
                resultsCount.textContent = 'No businesses found';
                resultsShowing.textContent = '';
                return;
            }
            
            const startIndex = currentOffset + 1;
            const endIndex = Math.min(currentOffset + currentResultsLimit, allSearchResults.length);
            
            resultsCount.textContent = `${allSearchResults.length} businesses found`;
            resultsShowing.textContent = `Showing ${startIndex}-${endIndex} of ${allSearchResults.length}`;
        }

        function updateLoadMoreButton() {
            const loadMoreContainer = document.getElementById('loadMoreContainer');
            const loadMoreBtn = document.getElementById('loadMoreBtn');
            const loadMoreInfo = document.getElementById('loadMoreInfo');
            
            const hasMoreResults = (currentOffset + currentResultsLimit) < allSearchResults.length;
            
            if (hasMoreResults && allSearchResults.length > currentResultsLimit) {
                loadMoreContainer.style.display = 'block';
                loadMoreBtn.disabled = false;
                
                const remaining = allSearchResults.length - (currentOffset + currentResultsLimit);
                const nextBatch = Math.min(25, remaining);
                loadMoreBtn.textContent = `Load ${nextBatch} More Results`;
                loadMoreInfo.textContent = `${remaining} more businesses available`;
            } else {
                loadMoreContainer.style.display = 'none';
            }
        }

        function loadMoreResults() {
            currentOffset += currentResultsLimit;
            displayPaginatedResults();
            
            // Scroll to new results
            const businessGrid = document.getElementById('businessGrid');
            const newResultsStart = businessGrid.children[Math.max(0, currentOffset - currentResultsLimit)];
            if (newResultsStart) {
                newResultsStart.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        function processOverpassResults(data, parsedQuery) {
            if (!data.elements || data.elements.length === 0) {
                console.log('⚠️ No results from OpenStreetMap, using fallback data');
                return searchBusinesses(parsedQuery);
            }

            const results = data.elements.map(element => {
                const tags = element.tags || {};
                const center = element.center || { lat: element.lat, lon: element.lon };
                
                // Determine business category
                let category = 'Business';
                let brand = tags.brand || tags.name || 'Local Business';
                
                if (tags.amenity === 'restaurant') category = 'Restaurant';
                else if (tags.amenity === 'fast_food') category = 'Fast Food';
                else if (tags.amenity === 'cafe') category = 'Coffee Shop';
                else if (tags.amenity === 'fuel') category = 'Gas Station';
                else if (tags.shop === 'convenience') category = 'Convenience Store';
                else if (tags.shop === 'supermarket') category = 'Supermarket';
                else if (tags.tourism === 'hotel') category = 'Hotel';
                else if (tags.highway === 'services') category = 'Truck Stop';
                else if (tags.highway === 'rest_area') category = 'Rest Area';

                return {
                    name: tags.name || brand,
                    address: formatAddress(tags),
                    category: category,
                    brand: brand,
                    rating: generateRandomRating(),
                    reviews: Math.floor(Math.random() * 50) + 1,
                    hours: tags.opening_hours || 'Hours vary',
                    amenities: generateAmenities(tags),
                    lat: center.lat,
                    lng: center.lon,
                    hasRestrooms: true,
                    restroomRatings: generateRestroomRatings(),
                    phone: tags.phone || '',
                    website: tags.website || ''
                };
            }).filter(business => business.lat && business.lng);

            // Filter by business name if searching for specific business
            if (parsedQuery.type === 'business') {
                const filtered = results.filter(business =>
                    business.name.toLowerCase().includes(parsedQuery.businessName.toLowerCase()) ||
                    business.brand.toLowerCase().includes(parsedQuery.businessName.toLowerCase())
                );
                
                if (filtered.length > 0) {
                    return filtered;
                }
            }

            // Filter by category if selected
            if (currentCategory) {
                return results.filter(business => 
                    business.category.toLowerCase().includes(currentCategory.toLowerCase())
                );
            }

            return results.slice(0, 50); // Limit to 50 results for performance
        }

        function formatAddress(tags) {
            const parts = [];
            if (tags['addr:housenumber']) parts.push(tags['addr:housenumber']);
            if (tags['addr:street']) parts.push(tags['addr:street']);
            if (tags['addr:city']) parts.push(tags['addr:city']);
            if (tags['addr:state']) parts.push(tags['addr:state']);
            if (tags['addr:postcode']) parts.push(tags['addr:postcode']);
            
            return parts.length > 0 ? parts.join(' ') : 'Address not available';
        }

        function generateRandomRating() {
            return Math.round((Math.random() * 4 + 6) * 10) / 10; // 6.0 to 10.0
        }

        function generateAmenities(tags) {
            const amenities = [];
            if (tags.wifi === 'yes') amenities.push('WiFi');
            if (tags.wheelchair === 'yes') amenities.push('Wheelchair Accessible');
            if (tags.parking) amenities.push('Parking');
            if (tags.drive_through === 'yes') amenities.push('Drive-Thru');
            if (tags.outdoor_seating === 'yes') amenities.push('Outdoor Seating');
            if (tags.takeaway === 'yes') amenities.push('Takeaway');
            if (tags.delivery === 'yes') amenities.push('Delivery');
            
            // Add default amenities based on category
            if (tags.amenity === 'fuel') amenities.push('24/7', 'Convenience Store');
            if (tags.highway === 'services') amenities.push('Truck Parking', 'Showers');
            if (tags.tourism === 'hotel') amenities.push('Lobby', 'Reception');
            
            return amenities.length > 0 ? amenities : ['Has Restrooms'];
        }

        // Badge Generation Functions
        function getCleanlinessBadge(rating) {
            if (rating >= 4.5) {
                return '<span style="background: #4CAF50; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">✨ SPOTLESS</span>';
            } else if (rating >= 3.5) {
                return '<span style="background: #2196F3; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">🧼 CLEAN</span>';
            } else if (rating >= 2.5) {
                return '<span style="background: #FF9800; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">⚠️ NEEDS ATTENTION</span>';
            } else {
                return '<span style="background: #f44336; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">❌ AVOID</span>';
            }
        }

        function getADABadge(rating) {
            if (rating >= 4.0) {
                return '<span style="background: #4CAF50; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">♿ FULLY ACCESSIBLE</span>';
            } else if (rating >= 3.0) {
                return '<span style="background: #FF9800; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">♿ PARTIALLY ACCESSIBLE</span>';
            } else {
                return '<span style="background: #f44336; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">♿ LIMITED ACCESS</span>';
            }
        }

        function getSafetyBadge(rating) {
            if (rating >= 4.0) {
                return '<span style="background: #4CAF50; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">🛡️ VERY SAFE</span>';
            } else if (rating >= 3.0) {
                return '<span style="background: #2196F3; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">🛡️ SAFE</span>';
            } else {
                return '<span style="background: #FF9800; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">⚠️ USE CAUTION</span>';
            }
        }

        function getSuppliesBadge(rating) {
            if (rating >= 4.0) {
                return '<span style="background: #4CAF50; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">🧻 WELL STOCKED</span>';
            } else if (rating >= 3.0) {
                return '<span style="background: #2196F3; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">🧻 BASIC SUPPLIES</span>';
            } else {
                return '<span style="background: #FF9800; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">⚠️ LIMITED SUPPLIES</span>';
            }
        }

        function getADAFeatures(rating) {
            if (rating >= 4.0) {
                return '✅ Wheelchair accessible stall • ✅ Grab bars • ✅ Lowered sink • ✅ Wide doorways';
            } else if (rating >= 3.0) {
                return '✅ Wheelchair accessible stall • ✅ Grab bars • ⚠️ Standard sink height';
            } else {
                return '⚠️ Limited wheelchair access • ❌ No grab bars • ❌ Standard fixtures';
            }
        }

        // User Badge System
        function getUserBadge(reviewCount) {
            if (reviewCount >= 100) {
                return '<span style="background: linear-gradient(45deg, #FFD700, #FFA500); color: #333; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">👑 EXPERT REVIEWER</span>';
            } else if (reviewCount >= 50) {
                return '<span style="background: #E5E4E2; color: #333; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">🥈 PLATINUM</span>';
            } else if (reviewCount >= 25) {
                return '<span style="background: #FFD700; color: #333; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">🥇 GOLD</span>';
            } else if (reviewCount >= 10) {
                return '<span style="background: #C0C0C0; color: #333; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">🥈 SILVER</span>';
            } else if (reviewCount >= 5) {
                return '<span style="background: #CD7F32; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">🥉 BRONZE</span>';
            } else {
                return '<span style="background: #4CAF50; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">⭐ REVIEWER</span>';
            }
        }

        function generateRestroomRatings() {
            return {
                cleanliness: Math.round((Math.random() * 2 + 3) * 10) / 10, // 3.0 to 5.0
                ada: Math.round((Math.random() * 2 + 3) * 10) / 10,
                safety: Math.round((Math.random() * 2 + 3) * 10) / 10,
                supplies: Math.round((Math.random() * 2 + 3) * 10) / 10
            };
        }

        function parseSearchQuery(query) {
            const zipRegex = /^\d{5}(-\d{4})?$/;
            const stateRegex = /\b[A-Z]{2}\b/i;
            
            if (zipRegex.test(query)) {
                return {
                    type: 'zip',
                    zipCode: query,
                    state: getStateFromZip(query),
                    original: query
                };
            }
            
            if (stateRegex.test(query)) {
                return {
                    type: 'state',
                    state: query.toUpperCase(),
                    original: query
                };
            }
            
            return {
                type: 'business',
                businessName: query,
                original: query
            };
        }

        function getStateFromZip(zip) {
            const prefix = zip.substring(0, 2);
            return zipToState[prefix] || 'Unknown';
        }

        function searchBusinesses(parsedQuery) {
            let results = [...sampleBusinesses];
            
            // Filter by category if selected
            if (currentCategory) {
                results = results.filter(business => 
                    business.category.toLowerCase().includes(currentCategory.toLowerCase()) ||
                    business.brand.toLowerCase().includes(currentCategory.toLowerCase())
                );
            }
            
            // Filter by search query
            if (parsedQuery.type === 'business') {
                results = results.filter(business =>
                    business.name.toLowerCase().includes(parsedQuery.businessName.toLowerCase()) ||
                    business.brand.toLowerCase().includes(parsedQuery.businessName.toLowerCase())
                );
            }
            
            return results;
        }

        function displayResults(results) {
            const grid = document.getElementById('businessGrid');
            const count = document.getElementById('resultsCount');
            
            count.textContent = `${results.length} business${results.length !== 1 ? 'es' : ''} found`;
            
            if (results.length === 0) {
                grid.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <div style="font-size: 3rem; margin-bottom: 15px;">😔</div>
                        <h3>No businesses found</h3>
                        <p>Try a different search term or category</p>
                    </div>
                `;
                return;
            }
            
            grid.innerHTML = results.map(business => createBusinessCard(business)).join('');
            hideLoading();
        }

        function createBusinessCard(business) {
            const stars = '⭐'.repeat(Math.floor(business.rating));
            const amenityTags = business.amenities.map(amenity => 
                `<span class="amenity">${amenity}</span>`
            ).join('');
            
            return `
                <div class="business-card">
                    <div class="business-header">
                        <div>
                            <div class="business-name">${business.name}</div>
                            <div class="business-address">${business.address}</div>
                        </div>
                        <div class="business-rating">
                            <div class="stars">${stars}</div>
                            <div class="rating-text">${business.rating}/10 (${business.reviews} reviews)</div>
                        </div>
                    </div>
                    
                    <div class="business-details">
                        <div class="business-tags">
                            <span class="tag category">${business.category}</span>
                            <span class="tag brand">${business.brand}</span>
                            <span class="tag">🚻 Has Restrooms</span>
                        </div>
                        
                        <div class="business-hours">${business.hours}</div>
                        
                        <div class="amenities">
                            ${amenityTags}
                        </div>
                        
                        <div class="restroom-rating">
                            <h4 style="margin-bottom: 10px;">Restroom Quality & Accessibility:</h4>
                            
                            <!-- Cleanliness Badges -->
                            <div style="display: flex; gap: 10px; margin-bottom: 10px; flex-wrap: wrap;">
                                ${getCleanlinessBadge(business.restroomRatings.cleanliness)}
                                ${getADABadge(business.restroomRatings.ada)}
                                ${getSafetyBadge(business.restroomRatings.safety)}
                                ${getSuppliesBadge(business.restroomRatings.supplies)}
                            </div>
                            
                            <!-- Detailed Ratings -->
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; font-size: 0.9rem;">
                                <div>🧼 Cleanliness: ${business.restroomRatings.cleanliness}/5</div>
                                <div>♿ ADA Compliance: ${business.restroomRatings.ada}/5</div>
                                <div>🛡️ Safety & Security: ${business.restroomRatings.safety}/5</div>
                                <div>🧻 Supplies Available: ${business.restroomRatings.supplies}/5</div>
                            </div>
                            
                            <!-- ADA Features -->
                            <div style="margin-top: 10px; font-size: 0.85rem; color: #666;">
                                ${getADAFeatures(business.restroomRatings.ada)}
                            </div>
                        </div>
                    </div>
                    
                    <div class="business-actions">
                        <button class="action-btn rate-btn" onclick="showRatingModal('${business.name}')">Rate Restroom</button>
                        <button class="action-btn directions-btn" onclick="getDirections(${business.lat}, ${business.lng})">Directio                    <button class="action-btn" onclick="claimBusiness('${business.name}')" style="background: #FF9800;">Claim This Listing</button>                  </div>
                </div>
            `;
        }

        function updateMap(results) {
            // Clear existing markers
            map.eachLayer(layer => {
                if (layer instanceof L.Marker) {
                    map.removeLayer(layer);
                }
            });
            
            if (results.length === 0) return;
            
            // Add markers for each business
            results.forEach(business => {
                const marker = L.marker([business.lat, business.lng])
                    .addTo(map)
                    .bindPopup(`
                        <div style="text-align: center;">
                            <h3>${business.name}</h3>
                            <p>${business.address}</p>
                            <p>⭐ ${business.rating}/10 (${business.reviews} reviews)</p>
                            <button onclick="showRatingModal('${business.name}')" style="background: #4CAF50; color: white; border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; margin: 5px;">Rate Restroom</button>
                        </div>
                    `);
            });
            
            // Fit map to show all markers
            if (results.length > 1) {
                const group = new L.featureGroup(map._layers);
                map.fitBounds(group.getBounds().pad(0.1));
            } else {
                map.setView([results[0].lat, results[0].lng], 12);
            }
        }

        // Category Selection
        function selectCategory(button, category) {
            // Update active state
            document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            
            currentCategory = category;
            console.log('📂 Selected category:', category);
            
            // If there's a search query, re-run the search
            const searchInput = document.getElementById('searchInput');
            if (searchInput.value.trim()) {
                performSearch();
            }
        }

        // View Toggle
        function setView(view) {
            // Update active state
            document.querySelectorAll('.view-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            currentView = view;
            const mapContainer = document.getElementById('mapContainer');
            const businessGrid = document.getElementById('businessGrid');
            
            switch(view) {
                case 'map':
                    mapContainer.style.display = 'block';
                    businessGrid.style.display = 'none';
                    break;
                case 'list':
                    mapContainer.style.display = 'none';
                    businessGrid.style.display = 'grid';
                    break;
                case 'both':
                default:
                    mapContainer.style.display = 'block';
                    businessGrid.style.display = 'grid';
                    break;
            }
            
            // Refresh map if visible
            if (view !== 'list') {
                setTimeout(() => map.invalidateSize(), 100);
            }
        }

        // Location Services
        function enableLocation() {
            if (!navigator.geolocation) {
                showMessage('Geolocation is not supported by this browser', 'error');
                return;
            }
            
            showMessage('Getting your location...', 'info');
            
            navigator.geolocation.getCurrentPosition(
                position => {
                    const lat = position.coords.latitude;
                    const lng = position.coords.longitude;
                    
                    console.log('📍 User location:', lat, lng);
                    
                    // Center map on user location
                    map.setView([lat, lng], 12);
                    
                    // Add user location marker
                    L.marker([lat, lng])
                        .addTo(map)
                        .bindPopup('📍 Your Location')
                        .openPopup();
                    
                    // Search for nearby businesses
                    searchNearbyBusinesses(lat, lng);
                    
                    showMessage('Location found! Searching for nearby businesses...', 'success');
                },
                error => {
                    console.error('❌ Geolocation error:', error);
                    showMessage('Unable to get your location. Please search manually.', 'error');
                }
            );
        }

        function searchNearbyBusinesses(lat, lng) {
            // Simulate nearby search with sample data
            const nearbyResults = sampleBusinesses.map(business => ({
                ...business,
                distance: calculateDistance(lat, lng, business.lat, business.lng)
            })).sort((a, b) => a.distance - b.distance);
            
            displayResults(nearbyResults);
            updateMap(nearbyResults);
        }

        function calculateDistance(lat1, lng1, lat2, lng2) {
            const R = 3959; // Earth's radius in miles
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLng = (lng2 - lng1) * Math.PI / 180;
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                      Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                      Math.sin(dLng/2) * Math.sin(dLng/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }

        // Authentication Functions
        function showLogin() {
            document.getElementById('loginModal').style.display = 'block';
        }

        function showSignup() {
            document.getElementById('signupModal').style.display = 'block';
        }

        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            console.log('🔐 Login attempt:', email);
            
            // Simulate login process
            if (email && password) {
                currentUser = {
                    email: email,
                    name: email.split('@')[0],
                    isAdmin: email === 'jessica@coloradoquality.com'
                };
                
                updateAuthUI();
                closeModal('loginModal');
                showMessage(`Welcome back, ${currentUser.name}!`, 'success');
                
                // Check for admin access
                if (currentUser.isAdmin) {
                    showAdminPanel();
                }
                
                // Enable review features
                enableReviewFeatures();
            }
        }

        function handleSignup(e) {
            e.preventDefault();
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('signupConfirmPassword').value;
            
            if (password !== confirmPassword) {
                showMessage('Passwords do not match', 'error');
                return;
            }
            
            console.log('📝 Signup attempt:', email);
            
            // Simulate signup process
            currentUser = {
                email: email,
                name: name,
                isAdmin: email === 'jessica@coloradoquality.com'
            };
            
            updateAuthUI();
            closeModal('signupModal');
            showMessage(`Account created! Welcome to GTGOTG, ${name}! Please check your email for verification.`, 'success');
            
            // Simulate email verification
            setTimeout(() => {
                showMessage('Email verified! You can now write reviews and upload photos.', 'success');
                enableReviewFeatures();
            }, 3000);
        }

        function updateAuthUI() {
            const authButtons = document.querySelector('.auth-buttons');
            if (currentUser) {
                authButtons.innerHTML = `
                    <span style="color: white; margin-right: 15px;">Welcome, ${currentUser.name}!</span>
                    <button class="auth-btn login-btn" onclick="logout()">Logout</button>
                `;
            } else {
                authButtons.innerHTML = `
                    <button class="auth-btn login-btn" onclick="showLogin()">Login</button>
                    <button class="auth-btn signup-btn" onclick="showSignup()">Sign Up</button>
                `;
            }
        }

        function logout() {
            currentUser = null;
            updateAuthUI();
            hideAdminPanel();
            disableReviewFeatures();
            showMessage('Logged out successfully', 'info');
        }

        function enableReviewFeatures() {
            document.getElementById('reviewText').disabled = false;
            document.getElementById('reviewText').placeholder = 'Share your experience to help other travelers...';
            document.getElementById('photoInput').disabled = false;
            document.querySelector('.photo-upload').style.opacity = '1';
            document.querySelector('.photo-upload').style.cursor = 'pointer';
            document.querySelector('.photo-upload small').textContent = 'Upload up to 5 photos';
        }

        function disableReviewFeatures() {
            document.getElementById('reviewText').disabled = true;
            document.getElementById('reviewText').placeholder = 'Please login to write reviews...';
            document.getElementById('photoInput').disabled = true;
            document.querySelector('.photo-upload').style.opacity = '0.5';
            document.querySelector('.photo-upload').style.cursor = 'not-allowed';
            document.querySelector('.photo-upload small').textContent = 'Login required for photo uploads';
        }

        // Rating Functions
        function showRatingModal(businessName) {
            document.getElementById('ratingModal').style.display = 'block';
            document.querySelector('#ratingModal .modal-title').textContent = `Rate Restroom - ${businessName}`;
            
            // Reset rating state
            currentRating = 0;
            selectedRestroomType = null;
            criteriaRatings = {};
            
            // Reset UI
            document.querySelectorAll('.star').forEach(star => star.classList.remove('active'));
            document.querySelectorAll('.restroom-type').forEach(type => type.classList.remove('selected'));
            document.querySelectorAll('.criteria-star').forEach(star => star.classList.remove('active'));
        }

        function selectRestroomType(element, type) {
            // Remove previous selection
            document.querySelectorAll('.restroom-type').forEach(el => el.classList.remove('selected'));
            
            // Add selection to clicked element
            element.classList.add('selected');
            selectedRestroomType = type;
            
            console.log('🚻 Selected restroom type:', type);
        }

        function setRating(rating) {
            currentRating = rating;
            
            // Update star display
            document.querySelectorAll('.star').forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
            
            console.log('⭐ Overall rating set to:', rating);
        }

        function setCriteriaRating(criteria, rating) {
            criteriaRatings[criteria] = rating;
            
            // Update criteria star display
            const criteriaStars = document.querySelector(`[data-criteria="${criteria}"] .criteria-star`);
            const stars = document.querySelectorAll(`[data-criteria="${criteria}"] .criteria-star`);
            
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
            
            console.log(`📊 ${criteria} rating set to:`, rating);
        }

        function handleReviewSubmit(e) {
            e.preventDefault();
            
            if (!selectedRestroomType) {
                showMessage('Please select which restroom you used', 'error');
                return;
            }
            
            if (currentRating === 0) {
                showMessage('Please provide an overall rating', 'error');
                return;
            }
            
            const reviewData = {
                restroomType: selectedRestroomType,
                overallRating: currentRating,
                criteriaRatings: criteriaRatings,
                reviewText: document.getElementById('reviewText').value,
                photos: [], // Would contain uploaded photos
                timestamp: new Date().toISOString(),
                user: currentUser ? currentUser.name : 'Anonymous'
            };
            
            console.log('📝 Submitting review:', reviewData);
            
            // Simulate review submission
            showMessage('Thank you for your review! It helps other travelers find clean, safe restrooms.', 'success');
            closeModal('ratingModal');
            
            // Reset form
            document.getElementById('reviewForm').reset();
        }

        function handlePhotoUpload(e) {
            const files = Array.from(e.target.files);
            const preview = document.getElementById('photoPreview');
            
            if (files.length > 5) {
                showMessage('Maximum 5 photos allowed', 'error');
                return;
            }
            
            preview.innerHTML = '';
            
            files.forEach((file, index) => {
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const photoItem = document.createElement('div');
                        photoItem.className = 'photo-item';
                        photoItem.innerHTML = `
                            <img src="${e.target.result}" alt="Restroom photo ${index + 1}">
                            <button class="photo-remove" onclick="removePhoto(this)">×</button>
                        `;
                        preview.appendChild(photoItem);
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

        function removePhoto(button) {
            button.parentElement.remove();
        }

        // Business Actions
        function getDirections(lat, lng) {
            const url = `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}`;
            window.open(url, '_blank');
        }

        function claimBusiness(businessName) {
            if (!currentUser) {
                showMessage('Please login to claim a business listing', 'info');
                showLogin();
                return;
            }
            
            showMessage(`Business claim request submitted for ${businessName}. We'll contact you within 24 hours.`, 'success');
        }

        // Admin Functions
        function showAdminPanel() {
            document.getElementById('adminPanel').style.display = 'block';
            console.log('🛡️ Admin panel activated');
        }

        function hideAdminPanel() {
            document.getElementById('adminPanel').style.display = 'none';
        }

        function manageBusinesses() {
            showMessage('Business management panel would open here', 'info');
        }

        function moderateReviews() {
            showMessage('Review moderation panel would open here', 'info');
        }

        function viewAnalytics() {
            showMessage('Analytics dashboard would open here', 'info');
        }

        function exportData() {
            showMessage('Data export functionality would be available here', 'info');
        }

        // Help System
        function toggleHelp() {
            helpVisible = !helpVisible;
            const helpBtn = document.querySelector('.help-btn');
            
            if (helpVisible) {
                helpBtn.style.background = 'rgba(255,255,255,0.4)';
                showMessage('Help mode activated! Hover over elements for tips and instructions.', 'info');
                enableHelpTooltips();
            } else {
                helpBtn.style.background = 'rgba(255,255,255,0.2)';
                hideHelpTooltip();
                disableHelpTooltips();
            }
        }

        function enableHelpTooltips() {
            // Add help tooltips to various elements
            const helpElements = [
                { selector: '.search-input', text: 'Search for any business name (McDonald\'s), city (Denver), state (Colorado), or ZIP code (80202) to find restrooms nationwide!' },
                { selector: '.category-btn', text: 'Filter results by business type. All categories include businesses with public restrooms.' },
                { selector: '.location-btn', text: 'Enable GPS to find restrooms near your current location.' },
                { selector: '.rate-btn', text: 'Rate restrooms on cleanliness, safety, ADA compliance, and supplies to help other travelers!' },
                { selector: '.restroom-type', text: 'Select which restroom you used: Men\'s, Women\'s, Unisex/Family, or ADA Accessible.' }
            ];
            
            helpElements.forEach(item => {
                const elements = document.querySelectorAll(item.selector);
                elements.forEach(el => {
                    el.addEventListener('mouseenter', () => showHelpTooltip(el, item.text));
                    el.addEventListener('mouseleave', hideHelpTooltip);
                });
            });
        }

        function disableHelpTooltips() {
            // Remove event listeners (simplified)
            document.querySelectorAll('[data-help]').forEach(el => {
                el.removeEventListener('mouseenter', showHelpTooltip);
                el.removeEventListener('mouseleave', hideHelpTooltip);
            });
        }

        function showHelpTooltip(element, text) {
            if (!helpVisible) return;
            
            const tooltip = document.getElementById('helpTooltip');
            const rect = element.getBoundingClientRect();
            
            tooltip.textContent = text;
            tooltip.style.display = 'block';
            tooltip.style.left = rect.left + 'px';
            tooltip.style.top = (rect.top - tooltip.offsetHeight - 10) + 'px';
        }

        function hideHelpTooltip() {
            document.getElementById('helpTooltip').style.display = 'none';
        }

        // Utility Functions
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function showMessage(message, type = 'info') {
            // Create message element
            const messageEl = document.createElement('div');
            messageEl.className = `message ${type}`;
            messageEl.textContent = message;
            
            // Insert at top of main container
            const mainContainer = document.querySelector('.main-container');
            mainContainer.insertBefore(messageEl, mainContainer.firstChild);
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                if (messageEl.parentNode) {
                    messageEl.parentNode.removeChild(messageEl);
                }
            }, 5000);
        }

        function showLoading() {
            const grid = document.getElementById('businessGrid');
            grid.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <div style="margin-left: 15px;">Searching ALL businesses nationwide...</div>
                </div>
            `;
        }

        function hideLoading() {
            // Loading is hidden when results are displayed
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initializeApp);

        // Business Verification Functions
        let currentVerificationStep = 1;
        let selectedVerificationMethod = '';
        let verificationData = {};

        function claimBusiness(businessName) {
            document.getElementById('verifyBusinessName').value = businessName;
            document.getElementById('verificationModal').style.display = 'block';
            resetVerificationSteps();
        }

        function closeVerificationModal() {
            document.getElementById('verificationModal').style.display = 'none';
            resetVerificationSteps();
        }

        function resetVerificationSteps() {
            currentVerificationStep = 1;
            selectedVerificationMethod = '';
            verificationData = {};
            
            // Hide all steps except step 1
            for (let i = 1; i <= 4; i++) {
                const step = document.getElementById(`step${i}`);
                if (step) step.style.display = i === 1 ? 'block' : 'none';
            }
            
            // Hide method-specific steps
            ['phone', 'email', 'document'].forEach(method => {
                const step = document.getElementById(`step3-${method}`);
                if (step) step.style.display = 'none';
            });
            
            // Clear form fields
            document.getElementById('verifyOwnerName').value = '';
            document.getElementById('verifyOwnerTitle').value = '';
            document.getElementById('verifyBusinessPhone').value = '';
            document.getElementById('verifyBusinessEmail').value = '';
        }

        function proceedToVerification() {
            // Validate required fields
            const ownerName = document.getElementById('verifyOwnerName').value.trim();
            const ownerTitle = document.getElementById('verifyOwnerTitle').value.trim();
            const businessPhone = document.getElementById('verifyBusinessPhone').value.trim();
            const businessEmail = document.getElementById('verifyBusinessEmail').value.trim();
            
            if (!ownerName || !ownerTitle || !businessPhone || !businessEmail) {
                showMessage('Please fill in all required fields', 'error');
                return;
            }
            
            // Store verification data
            verificationData = {
                businessName: document.getElementById('verifyBusinessName').value,
                ownerName,
                ownerTitle,
                businessPhone,
                businessEmail
            };
            
            // Move to step 2
            document.getElementById('step1').style.display = 'none';
            document.getElementById('step2').style.display = 'block';
            currentVerificationStep = 2;
        }

        function selectVerificationMethod(method) {
            selectedVerificationMethod = method;
            
            // Update visual selection
            document.querySelectorAll('.verification-method').forEach(el => {
                el.classList.remove('selected');
            });
            event.target.closest('.verification-method').classList.add('selected');
            
            // Show appropriate step 3
            setTimeout(() => {
                document.getElementById('step2').style.display = 'none';
                document.getElementById(`step3-${method}`).style.display = 'block';
                currentVerificationStep = 3;
                
                // Update display information
                if (method === 'phone') {
                    document.getElementById('phoneDisplay').textContent = verificationData.businessPhone;
                } else if (method === 'email') {
                    document.getElementById('emailDisplay').textContent = verificationData.businessEmail;
                }
            }, 300);
        }

        function sendPhoneCode() {
            showMessage('Verification code sent to ' + verificationData.businessPhone, 'success');
            document.getElementById('phoneCodeSection').style.display = 'block';
            verificationData.phoneCode = Math.floor(100000 + Math.random() * 900000).toString();
            console.log('Phone verification code:', verificationData.phoneCode);
        }

        function verifyPhoneCode() {
            const enteredCode = document.getElementById('phoneCode').value.trim();
            if (!enteredCode) {
                showMessage('Please enter the verification code', 'error');
                return;
            }
            if (enteredCode.length === 6) {
                showMessage('Phone verification successful!', 'success');
                completeVerification();
            } else {
                showMessage('Invalid verification code. Please try again.', 'error');
            }
        }

        function sendEmailCode() {
            showMessage('Verification code sent to ' + verificationData.businessEmail, 'success');
            document.getElementById('emailCodeSection').style.display = 'block';
            verificationData.emailCode = Math.floor(100000 + Math.random() * 900000).toString();
            console.log('Email verification code:', verificationData.emailCode);
        }

        function verifyEmailCode() {
            const enteredCode = document.getElementById('emailCode').value.trim();
            if (!enteredCode) {
                showMessage('Please enter the verification code', 'error');
                return;
            }
            if (enteredCode.length === 6) {
                showMessage('Email verification successful!', 'success');
                completeVerification();
            } else {
                showMessage('Invalid verification code. Please try again.', 'error');
            }
        }

        function handleDocumentUpload() {
            const fileInput = document.getElementById('documentUpload');
            const file = fileInput.files[0];
            const uploadStatus = document.getElementById('uploadStatus');
            const submitBtn = document.getElementById('submitDocumentBtn');
            
            if (file) {
                const allowedTypes = ['application/pdf', 'image/jpeg', 'image/jpg', 'image/png'];
                if (!allowedTypes.includes(file.type)) {
                    uploadStatus.textContent = 'Please upload a PDF, JPG, or PNG file';
                    uploadStatus.style.color = '#f44336';
                    submitBtn.disabled = true;
                    return;
                }
                
                if (file.size > 5 * 1024 * 1024) {
                    uploadStatus.textContent = 'File size must be less than 5MB';
                    uploadStatus.style.color = '#f44336';
                    submitBtn.disabled = true;
                    return;
                }
                
                uploadStatus.textContent = `✅ ${file.name} uploaded successfully`;
                uploadStatus.style.color = '#4CAF50';
                submitBtn.disabled = false;
                verificationData.document = file;
            }
        }

        function submitDocument() {
            if (!verificationData.document) {
                showMessage('Please upload a document first', 'error');
                return;
            }
            showMessage('Document submitted for review. You will be notified within 24-48 hours.', 'success');
            setTimeout(() => completeVerification(), 2000);
        }

        function completeVerification() {
            document.querySelectorAll('.verification-step').forEach(step => {
                step.style.display = 'none';
            });
            document.getElementById('step4').style.display = 'block';
            
            const verifiedOwners = JSON.parse(localStorage.getItem('verifiedOwners') || '{}');
            verifiedOwners[verificationData.businessName] = {
                ownerName: verificationData.ownerName,
                ownerTitle: verificationData.ownerTitle,
                verificationMethod: selectedVerificationMethod,
                verifiedDate: new Date().toISOString(),
                businessPhone: verificationData.businessPhone,
                businessEmail: verificationData.businessEmail
            };
            localStorage.setItem('verifiedOwners', JSON.stringify(verifiedOwners));
            updateBusinessVerificationStatus(verificationData.businessName);
        }

        function updateBusinessVerificationStatus(businessName) {
            const claimButtons = document.querySelectorAll('.action-btn');
            claimButtons.forEach(btn => {
                if (btn.textContent.includes('Claim')) {
                    btn.innerHTML = '✅ Verified Owner';
                    btn.style.background = '#4CAF50';
                    btn.onclick = () => showOwnerDashboard(businessName);
                }
            });
        }

        function showOwnerDashboard(businessName) {
            showMessage(`Welcome to your owner dashboard for ${businessName}!`, 'success');
        }

        // Owner Response Functions
        let currentReviewData = {};

        function respondToReview(reviewId, reviewData) {
            currentReviewData = { reviewId, ...reviewData };
            document.getElementById('reviewerName').textContent = reviewData.reviewerName || 'Anonymous User';
            document.getElementById('reviewDate').textContent = reviewData.reviewDate || 'Recently';
            document.getElementById('reviewRating').textContent = '⭐'.repeat(reviewData.rating || 5);
            document.getElementById('reviewText').textContent = reviewData.reviewText || 'No comment provided';
            
            const verifiedOwners = JSON.parse(localStorage.getItem('verifiedOwners') || '{}');
            const ownerInfo = verifiedOwners[reviewData.businessName];
            if (ownerInfo) {
                document.getElementById('responseOwnerName').textContent = ownerInfo.ownerName;
            }
            
            document.getElementById('ownerResponseText').value = '';
            updateCharacterCount();
            document.getElementById('ownerResponseModal').style.display = 'block';
        }

        function closeOwnerResponseModal() {
            document.getElementById('ownerResponseModal').style.display = 'none';
            currentReviewData = {};
        }

        function updateCharacterCount() {
            const textarea = document.getElementById('ownerResponseText');
            const charCount = document.getElementById('responseCharCount');
            if (textarea && charCount) {
                charCount.textContent = textarea.value.length;
                if (textarea.value.length > 450) {
                    charCount.style.color = '#f44336';
                } else if (textarea.value.length > 400) {
                    charCount.style.color = '#FF9800';
                } else {
                    charCount.style.color = '#666';
                }
            }
        }

        function submitOwnerResponse() {
            const responseText = document.getElementById('ownerResponseText').value.trim();
            const responseType = document.querySelector('input[name="responseType"]:checked').value;
            
            if (!responseText) {
                showMessage('Please enter a response', 'error');
                return;
            }
            
            if (responseText.length > 500) {
                showMessage('Response must be 500 characters or less', 'error');
                return;
            }
            
            const responses = JSON.parse(localStorage.getItem('ownerResponses') || '{}');
            const responseId = Date.now().toString();
            responses[responseId] = {
                reviewId: currentReviewData.reviewId,
                businessName: currentReviewData.businessName,
                responseText,
                responseType,
                responseDate: new Date().toISOString(),
                ownerName: document.getElementById('responseOwnerName').textContent
            };
            localStorage.setItem('ownerResponses', JSON.stringify(responses));
            
            showMessage(`${responseType === 'public' ? 'Public' : 'Private'} response posted successfully!`, 'success');
            closeOwnerResponseModal();
        }

        function isVerifiedOwner(businessName) {
            const verifiedOwners = JSON.parse(localStorage.getItem('verifiedOwners') || '{}');
            return verifiedOwners.hasOwnProperty(businessName);
        }

        // Add event listeners
        setTimeout(() => {
            const responseTextarea = document.getElementById('ownerResponseText');
            if (responseTextarea) {
                responseTextarea.addEventListener('input', updateCharacterCount);
            }
        }, 1000);

        console.log('🚽 GTGOTG - Complete Premium Application Script Loaded');
    </script>
</body>
</html>

